name: Generate ASCII Artwork Workflow

# This workflow runs whenever code is pushed to the repository
on:
  push:

jobs:
  build_job_1:
    # This job installs a third party library and generates a file
    runs-on: ubuntu-latest
    steps:
      # Install cowsay package on the runner
      - name: Install cowsay
        run: sudo apt-get update && sudo apt-get install -y cowsay

      # Generate ASCII art and save it to a file
      - name: Generate ASCII message
        run: cowsay -f dragon "Run for cover, I am a DRAGON....RAWR" > dragon.txt

      # Pause execution to simulate build time
      - name: Pause build job
        run: sleep 30


  test_job_2:
    # This job runs only after build_job_1 completes successfully
    needs: build_job_1
    runs-on: ubuntu-latest
    steps:
      # Pause execution to simulate testing time
      - name: Pause test job
        run: sleep 10

      # Verify that the generated file contains expected content
      - name: Verify generated content
        run: grep -i "dragon" dragon.txt


  deploy_job_3:
    # This job runs only after test_job_2 completes successfully
    needs: test_job_2
    runs-on: ubuntu-latest
    steps:
      # Display the final generated file
      - name: Display ASCII file
        run: cat dragon.txt
